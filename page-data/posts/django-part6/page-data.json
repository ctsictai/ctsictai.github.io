{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/django-part6/","result":{"data":{"markdownRemark":{"id":"ad2a19c7-3435-5007-95f4-04d162c29505","html":"<h1 id=\"django에서-aws_s3에-image-업로드-하는-방법\"><a href=\"#django%EC%97%90%EC%84%9C-aws_s3%EC%97%90-image-%EC%97%85%EB%A1%9C%EB%93%9C-%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"django에서 aws_s3에 image 업로드 하는 방법 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django에서 AWS_S3에 Image 업로드 하는 방법</h1>\n<h2 id=\"1aws-iam-user-셋업\"><a href=\"#1aws-iam-user-%EC%85%8B%EC%97%85\" aria-label=\"1aws iam user 셋업 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.AWS IAM user 셋업</h2>\n<h2 id=\"2aws-s3-bucket-셋업\"><a href=\"#2aws-s3-bucket-%EC%85%8B%EC%97%85\" aria-label=\"2aws s3 bucket 셋업 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.AWS S3 bucket 셋업</h2>\n<h2 id=\"3django에서-boto3를-사용하여-s3와-연결-및-파일-업로드\"><a href=\"#3django%EC%97%90%EC%84%9C-boto3%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-s3%EC%99%80-%EC%97%B0%EA%B2%B0-%EB%B0%8F-%ED%8C%8C%EC%9D%BC-%EC%97%85%EB%A1%9C%EB%93%9C\" aria-label=\"3django에서 boto3를 사용하여 s3와 연결 및 파일 업로드 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.Django에서 boto3를 사용하여 S3와 연결 및 파일 업로드</h2>\n<h1 id=\"aws-iam-user-set-up\"><a href=\"#aws-iam-user-set-up\" aria-label=\"aws iam user set up permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS IAM user set up</h1>\n<p>AWS 당연히 회원만 이용할 수 있는 서비스입니다. AWS 회원가입과 로그인을 먼저 하신 후 과정을 하신 후의 프로세스입니다.</p>\n<h2 id=\"1-aws에서-iam-페이지로-들어간다\"><a href=\"#1-aws%EC%97%90%EC%84%9C-iam-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A1%9C-%EB%93%A4%EC%96%B4%EA%B0%84%EB%8B%A4\" aria-label=\"1 aws에서 iam 페이지로 들어간다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. AWS에서 IAM 페이지로 들어간다</h2>\n<p>Find Service에서 IAM을 치고 들어가는 것이 좋다</p>\n<h2 id=\"2-iam-resource에서-users-링크를-클릭한다\"><a href=\"#2-iam-resource%EC%97%90%EC%84%9C-users-%EB%A7%81%ED%81%AC%EB%A5%BC-%ED%81%B4%EB%A6%AD%ED%95%9C%EB%8B%A4\" aria-label=\"2 iam resource에서 users 링크를 클릭한다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. IAM resource에서 users 링크를 클릭한다</h2>\n<h2 id=\"3-add-user-버튼을-클릭하여-add-user-페이지로-이동\"><a href=\"#3-add-user-%EB%B2%84%ED%8A%BC%EC%9D%84-%ED%81%B4%EB%A6%AD%ED%95%98%EC%97%AC-add-user-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A1%9C-%EC%9D%B4%EB%8F%99\" aria-label=\"3 add user 버튼을 클릭하여 add user 페이지로 이동 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ADD user 버튼을 클릭하여 add user 페이지로 이동</h2>\n<ul>\n<li>유저 이름을 입력</li>\n<li>Programmatic Access 항목을 체크한다.</li>\n<li>“AWS management access console” 항목은 체크 하지 않도록 한다.</li>\n</ul>\n<h2 id=\"4-permission-설정-페이지에서-새로운-permission-policy을-추가-하도록-한다\"><a href=\"#4-permission-%EC%84%A4%EC%A0%95-%ED%8E%98%EC%9D%B4%EC%A7%80%EC%97%90%EC%84%9C-%EC%83%88%EB%A1%9C%EC%9A%B4-permission-policy%EC%9D%84-%EC%B6%94%EA%B0%80-%ED%95%98%EB%8F%84%EB%A1%9D-%ED%95%9C%EB%8B%A4\" aria-label=\"4 permission 설정 페이지에서 새로운 permission policy을 추가 하도록 한다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Permission 설정 페이지에서 새로운 permission policy을 추가 하도록 한다</h2>\n<ul>\n<li>새로운 permission policy를 추가하는 페이지에서 JSON 탭으로 이동해서 다음의 JSON을 입력하도록 한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n    &quot;Version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Sid&quot;: &quot;VisualEditor0&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Action&quot;: [\n                &quot;s3:PutObject&quot;,\n                &quot;s3:GetObjectAcl&quot;,\n                &quot;s3:GetObject&quot;,\n                &quot;s3:ListBucket&quot;,\n                &quot;s3:DeleteObject&quot;,\n                &quot;s3:PutObjectAcl&quot;\n            ],\n            &quot;Resource&quot;: [\n                &quot;arn:aws:s3:::example-bucket-name/*&quot;,\n                &quot;arn:aws:s3:::example-bucket-name&quot;\n            ]\n        }\n    ]\n}</code></pre></div>\n<ul>\n<li>Action에서 put, get, list, delete 항목은 CRUD를 제공하는 action을 명시한다</li>\n<li>example-bucket-name은 부분에서 내가 S3에서 생성할 버킷 이름으로 명시한다.</li>\n</ul>\n<h2 id=\"5-permission-policy-페이지로-돌어가서-오른쪽-상단에-있는-refresh-버튼을-클릭하여-리스트를-refresh한-후-방금-만든-policy를-선택한후-next-버튼을-눌른다\"><a href=\"#5-permission-policy-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%A1%9C-%EB%8F%8C%EC%96%B4%EA%B0%80%EC%84%9C-%EC%98%A4%EB%A5%B8%EC%AA%BD-%EC%83%81%EB%8B%A8%EC%97%90-%EC%9E%88%EB%8A%94-refresh-%EB%B2%84%ED%8A%BC%EC%9D%84-%ED%81%B4%EB%A6%AD%ED%95%98%EC%97%AC-%EB%A6%AC%EC%8A%A4%ED%8A%B8%EB%A5%BC-refresh%ED%95%9C-%ED%9B%84-%EB%B0%A9%EA%B8%88-%EB%A7%8C%EB%93%A0-policy%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%9C%ED%9B%84-next-%EB%B2%84%ED%8A%BC%EC%9D%84-%EB%88%8C%EB%A5%B8%EB%8B%A4\" aria-label=\"5 permission policy 페이지로 돌어가서 오른쪽 상단에 있는 refresh 버튼을 클릭하여 리스트를 refresh한 후 방금 만든 policy를 선택한후 next 버튼을 눌른다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. permission policy 페이지로 돌어가서 오른쪽 상단에 있는 refresh 버튼을 클릭하여 리스트를 refresh한 후 방금 만든 policy를 선택한후 next 버튼을 눌른다.</h2>\n<h2 id=\"6-새로운-유저-생성이-완료되면-csv-버튼을-클릭한다\"><a href=\"#6-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%9C%A0%EC%A0%80-%EC%83%9D%EC%84%B1%EC%9D%B4-%EC%99%84%EB%A3%8C%EB%90%98%EB%A9%B4-csv-%EB%B2%84%ED%8A%BC%EC%9D%84-%ED%81%B4%EB%A6%AD%ED%95%9C%EB%8B%A4\" aria-label=\"6 새로운 유저 생성이 완료되면 csv 버튼을 클릭한다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 새로운 유저 생성이 완료되면 csv 버튼을 클릭한다</h2>\n<ul>\n<li>Access Key ID 와 Secret Access Key를 다운 받는다. 지금 다운 받지 않으면 다시 다운 받을 수 없으므로 꼭 다운 받도록 한다</li>\n</ul>\n<h1 id=\"aws-s3-bucket-셋업\"><a href=\"#aws-s3-bucket-%EC%85%8B%EC%97%85\" aria-label=\"aws s3 bucket 셋업 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS S3 bucket 셋업</h1>\n<h2 id=\"1-aws-s3페이지에서-create-bucket버튼을-클릭-한후-버켓-이름과-region-선택\"><a href=\"#1-aws-s3%ED%8E%98%EC%9D%B4%EC%A7%80%EC%97%90%EC%84%9C-create-bucket%EB%B2%84%ED%8A%BC%EC%9D%84-%ED%81%B4%EB%A6%AD-%ED%95%9C%ED%9B%84-%EB%B2%84%EC%BC%93-%EC%9D%B4%EB%A6%84%EA%B3%BC-region-%EC%84%A0%ED%83%9D\" aria-label=\"1 aws s3페이지에서 create bucket버튼을 클릭 한후 버켓 이름과 region 선택 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. AWS S3페이지에서 “Create bucket”버튼을 클릭 한후 버켓 이름과 region 선택</h2>\n<ul>\n<li>그 다음 페이지 넘어가도 무방하고</li>\n<li>그 다음 페이지(권한 설정)에서 block all public access를 uncheck를 한다.</li>\n</ul>\n<h2 id=\"2-버켓-생성-완료-후-설정-페이지에서-상단의-permission-탭에서-bucket-policy-탭을-클릭-후-json을-입력한다\"><a href=\"#2-%EB%B2%84%EC%BC%93-%EC%83%9D%EC%84%B1-%EC%99%84%EB%A3%8C-%ED%9B%84-%EC%84%A4%EC%A0%95-%ED%8E%98%EC%9D%B4%EC%A7%80%EC%97%90%EC%84%9C-%EC%83%81%EB%8B%A8%EC%9D%98-permission-%ED%83%AD%EC%97%90%EC%84%9C-bucket-policy-%ED%83%AD%EC%9D%84-%ED%81%B4%EB%A6%AD-%ED%9B%84-json%EC%9D%84-%EC%9E%85%EB%A0%A5%ED%95%9C%EB%8B%A4\" aria-label=\"2 버켓 생성 완료 후 설정 페이지에서 상단의 permission 탭에서 bucket policy 탭을 클릭 후 json을 입력한다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 버켓 생성 완료 후 설정 페이지에서 상단의 Permission 탭에서 Bucket Policy 탭을 클릭 후 JSON을 입력한다.</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n    &quot;Version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Sid&quot;: &quot;Stmt1507637373230&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Principal&quot;: {\n                &quot;AWS&quot;: &quot;user_arn&quot;\n            },\n            &quot;Action&quot;: [\n                &quot;s3:GetObject&quot;,\n                &quot;s3:PutObject&quot;,\n                &quot;s3:DeleteObject&quot;\n            ],\n            &quot;Resource&quot;: &quot;arn:aws:s3:::bucket_name/*&quot;\n        },\n        {\n            &quot;Sid&quot;: &quot;Stmt1507637391106&quot;,\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Principal&quot;: &quot;*&quot;,\n            &quot;Action&quot;: &quot;s3:GetObject&quot;,\n            &quot;Resource&quot;: &quot;arn:aws:s3:::bucket_name/*&quot;\n        }\n    ]\n}</code></pre></div>\n<ul>\n<li>user_arn 설정\nIAM user의 ARN을 입력해야한다.\n<img src=\"https://stackoverflow.com/c/wecode/images/s/5f658489-6b2e-4e64-ba73-9998b0bacb7e.png\" alt=\"ARN\"></li>\n<li>bucket_name은 각자 생성한 버켓의 이름이다.</li>\n<li>save버튼을 클릭하면 메세지 warning이 뜬다. 아까 버킷 생성이 public access를 줘서 보안 에러가 뜨는 것인데 지금은 무시해도 상관 없다.</li>\n</ul>\n<h2 id=\"3-cors-configurations-설정\"><a href=\"#3-cors-configurations-%EC%84%A4%EC%A0%95\" aria-label=\"3 cors configurations 설정 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. CORS configurations 설정</h2>\n<p>버킷 정책 바로 옆의 버튼인 CORS 구성 버튼을 눌러서 CORS 설정을 해주도록 한다</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;CORSConfiguration xmlns=&quot;http://s3.amazonaws.com/doc/2006-03-01/&quot;&gt;\n&lt;CORSRule&gt;\n    &lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;\n    &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;\n    &lt;MaxAgeSeconds&gt;3000&lt;/MaxAgeSeconds&gt;\n    &lt;ExposeHeader&gt;ETag&lt;/ExposeHeader&gt;\n    &lt;AllowedHeader&gt;*&lt;/AllowedHeader&gt;\n&lt;/CORSRule&gt;\n&lt;/CORSConfiguration&gt;</code></pre></div>\n<ul>\n<li>opacity 먹은 글이 텍스트 편집기에 보이는데 그냥 무시하고 위의 내용 복사 붙여넣기 하면 된다.</li>\n</ul>\n<h1 id=\"django에서-boto3를-사용하여-s3와-연결-및-파일-업로드\"><a href=\"#django%EC%97%90%EC%84%9C-boto3%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-s3%EC%99%80-%EC%97%B0%EA%B2%B0-%EB%B0%8F-%ED%8C%8C%EC%9D%BC-%EC%97%85%EB%A1%9C%EB%93%9C\" aria-label=\"django에서 boto3를 사용하여 s3와 연결 및 파일 업로드 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django에서 boto3를 사용하여 S3와 연결 및 파일 업로드</h1>\n<h2 id=\"1-boto3-설치\"><a href=\"#1-boto3-%EC%84%A4%EC%B9%98\" aria-label=\"1 boto3 설치 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. boto3 설치</h2>\n<blockquote>\n<p>pip install boto3</p>\n</blockquote>\n<ul>\n<li>AWS와 python과의 연결을 위한 라이브러리이다</li>\n</ul>\n<h2 id=\"2-boto3를-이용한-엔드포인트-만들기\"><a href=\"#2-boto3%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"2 boto3를 이용한 엔드포인트 만들기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. boto3를 이용한 엔드포인트 만들기</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import boto3\n\nclass FileView(View):\n\n    s3_client = boto3.client(\n        &#39;s3&#39;,\n        aws_access_key_id=&quot;AKIASTLUR2MMQHRRSS6M&quot;,\n        aws_secret_access_key=&quot;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&quot;\n    )\n\n    def post(self, request):\n        file = request.FILES[&#39;filename&#39;]\n\n        self.s3_client.upload_fileobj(\n            file,\n            &quot;s3-test-wecode&quot;,\n            file.name,\n            ExtraArgs={\n                &quot;ContentType&quot;: file.content_type\n            }\n        )\n\n        return HttpResponse(status= 200)</code></pre></div>\n<ul>\n<li>aws<em>acces</em>key<em>id와 aws</em>secret<em>access</em>key 값은 IAM user 생성 후 다운 받았던 csv 파일에 나와 있다.</li>\n<li>upload_fileobj 함수의 두번 째 인자는 파일을 업로드 하기 희망하는 버킷이름(내가 방금전에 생성한 버킷)</li>\n<li>장고에서는 전송된 파일이 request.FILES를 통해 전달된다.</li>\n</ul>","fields":{"slug":"/posts/django-part6/","tagSlugs":["/tag/python-django-aws-s-3/"]},"frontmatter":{"date":"2019-11-17T21:30:03.284Z","description":"Django's handling image file ","tags":["Python/Django/AWS_S3"],"title":"Django Apprenticeship Study Part.6","socialImage":"/media/gutenberg.jpg"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/django-part6/"}}}