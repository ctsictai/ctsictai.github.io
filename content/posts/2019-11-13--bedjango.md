---
title: Django Apprenticeship Study Part.4
date: "2019-11-10T21:30:03.284Z"
template: "post"
draft: false
slug: "/posts/django-part4/"
category: "Python/Django/Database/sql"
tags:
  - "Python/Django/Database/sql"

description: "Django basic concept & Database & django orm basic concept/SQL"
socialImage: "/media/gutenberg.jpg"
---

# 백엔드의 기본 개념 다시 짚기

백엔드 toy 프로젝트도 진행 한 번 해보면서 부족한 점을 많이 느꼈지만 의외로 내가 기초 개념들이 부족하다는 것을 다시 한번 느끼고 정리하고 가려고 한다.

## 백엔드 개발시 주의점

1. 프론트 웹페이지에 맞춰지는 개발은 되도록 지양한다. 왜 그럴까?
   1. 프론트 웹 페이지는 유동성이 매우 크다
   2. 당시 한 페이지에서만 기능이 구현되서 범용성이 매우 떨어진다.
2. 백엔드는 데이터 중심이고 데이터를 저장하는 Database 조직하는 모델이 중심이 되어야 한다.
3. 데이터를 저장하는데 RDBMS을 사용한다면 DB 모델링이 매우 중요하다. 데이터가 어떻게 관계를 맺고 있으며 어떻게 저장해야 정합성있고 논리적인지 생각해야한다. 이걸 하기 위해서 정규화를 제대로 알아야 한다는 생각이 든다.
4. 데이터를 어떻게 가공하여 프론트앤드에 제공할 것인가? 주로 JSON 형태의 데이터 타입을 제공하지만 그 JSON 형태의 키값은? value의 형식은? - 데이터의 관계성에 따라서

## 장고의 앱은 무엇을 뜻하는가?

하나의 독립적인 컴포넌트라고 보면 된다. 혹은 독립적인 모듈의 하나라고 봐도 된다.

## 그러면 프로젝트란 무엇인가?

하나의 독립적인 어플리케이션이라고 보면 된다.

- 프로젝트에서 어플리케이션을 개발할 때 필요한 기능 단위인 앱(컴포넌트) 단위로 나누어서 개발하여 개발의 모듈화와 유지보수 관리가 편리하게 한다.

## Single Responsibility

class 나 function을 module화여 최대한 한가지 기능만 구현하도록 코드를 짜는 것을 얘기한다.
그러나 기능이 2개이상인 불가피한 경우가 생기는데(그렇다고 따로 class나 function을 만들기도 애매한 상황) 그럴 때 쓰는 것이 데코레이터다

## elif는 최대한 피하자

조건문은 최대한 binary하게 나누는 것이 좋다

# Queryset in django

queryset은 database에서 데이터의 집합을 나타내는 것으로 하나의 객체(object)라고 보면 된다. 보통 객체 단위를 한 개의 row라고 보면 된다.

## selected_related()

1. ForeignKey, OneToOneField 관계에서 활용
2. ForeignKey/OneToOneField 관계에서 Lazy하게 쿼리하지 않고, DB단에서 INNER JOIN 으로 쿼리할 수 있다.
3. QuerySet 객체를 가져올 때 연관있는 model들을 같이 가져오게 해주는 메서드이다.
4. selected_related(‘foreignkey 필드명')으로 해당 쿼리셋 모델을 가져와 cache한다.

## prefetch_related()

1. ManyToManyField, ForeignKey의 reverse relation 에서 활용
2. 각 관계 별로 DB 쿼리를 수행하고, 파이썬 단에서 조인을 수행한다
3. QuerySet 객체를 가져올 때 연관있는 model들을 같이 가져오게 해주는 메서드이다.
4. prefetch_related(‘manytomany필드명')으로 해당 쿼리셋 모델을 가져와서 cache

## objects.bulk_create()

일정한 규칙을 가진 obj 다수를 database에 저장할 때 쓰는 구문이다.
bulk_create가 없다면 objects.get()으로 한 개의 row object를 받아와서 for문 돌려서 저장해야하는데 그것을 한 가지 query로 줄일 수 있다.

일정한 규칙을 가진 다수의 obj(여러개의 row)를 저장할 때 유용하게 사용하자
